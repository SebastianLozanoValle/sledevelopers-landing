<section class="relative overflow-hidden w-full" id="services">
  <div class="services-scroll-container">
    <div class="services-content-inner max-w-[1400px] mx-auto px-4 md:px-8">

      <!-- HEADER -->
      <div class="services-header">
        <h2 class="text-[clamp(2rem,6vw,5rem)] font-extrabold text-gray-900 leading-tight mb-3 md:mb-4">
          Aprovecha toda la <span class="text-blue-500">experiencia en comercio digital</span>
        </h2>
        <p class="text-base md:text-lg text-gray-600 max-w-2xl">
          Ya sea que quieras consultar una idea, agregar capacidades faltantes,
          expandir r√°pidamente tu equipo o entregar un proyecto completo.
        </p>
      </div>

      <!-- DESKTOP -->
      <div class="services-scroll-content hidden md:flex">
        <div class="service-card">
          <div class="service-number">01</div>
          <h3 class="service-title">Consulta Inicial</h3>
          <p class="service-description">Escuchamos tu idea y analizamos objetivos.</p>
        </div>
        <div class="service-card">
          <div class="service-number">02</div>
          <h3 class="service-title">Atenci√≥n de Dudas</h3>
          <p class="service-description">Aclaramos inquietudes y definimos el camino.</p>
        </div>
        <div class="service-card">
          <div class="service-number">03</div>
          <h3 class="service-title">An√°lisis y Propuesta</h3>
          <p class="service-description">Propuesta clara con tiempos y alcance.</p>
        </div>
        <div class="service-card">
          <div class="service-number">04</div>
          <h3 class="service-title">Contrato</h3>
          <p class="service-description">Formalizamos el acuerdo.</p>
        </div>
        <div class="service-card">
          <div class="service-number">05</div>
          <h3 class="service-title">Dise√±o</h3>
          <p class="service-description">Wireframes y prototipos.</p>
        </div>
        <div class="service-card">
          <div class="service-number">06</div>
          <h3 class="service-title">Desarrollo</h3>
          <p class="service-description">Construcci√≥n iterativa.</p>
        </div>
      </div>

      <!-- MOBILE -->
      <div class="services-mobile-content flex md:hidden flex-col gap-6 mt-10">
        <div class="service-card">‚Ä¶</div>
      </div>

    </div>
  </div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', async () => {
    const { gsap } = await import('gsap');
    const { ScrollTrigger } = await import('gsap/ScrollTrigger');

    gsap.registerPlugin(ScrollTrigger);

    function initServicesScroll() {
      if (window.innerWidth <= 768) return;

      const container = document.querySelector('.services-scroll-container');
      const content = document.querySelector('.services-scroll-content');
      if (!container || !content) return;

      const cards = content.querySelectorAll('.service-card');
      if (!cards.length) return;

      const cardWidth = cards[0].offsetWidth;
      const gap = 40;

      const totalWidth = (cardWidth + gap) * cards.length;
      const containerWidth = container.offsetWidth;
      const scrollDistance = Math.max(0, totalWidth - containerWidth);

      // üî• OFFSET M√ÅS A LA DERECHA (mitad visible al entrar)
      const startOffset = cardWidth * 1.1;

      // Posici√≥n inicial
      gsap.set(content, {
        x: startOffset
      });

      gsap.to(content, {
        x: -scrollDistance,
        ease: 'none',
        scrollTrigger: {
          trigger: container,
          start: 'top bottom-=100',
          end: 'bottom top',
          scrub: 0.6,
          invalidateOnRefresh: true
        }
      });
    }

    initServicesScroll();
    window.addEventListener('resize', () => ScrollTrigger.refresh());
  });
</script>

<style>
  .services-scroll-container {
    position: relative;
    width: 100%;
    overflow: hidden;
  }

  .services-content-inner {
    padding-top: 120px;
    padding-bottom: 120px;
  }

  .services-header {
    margin-bottom: 60px;
  }

  .services-scroll-content {
    display: flex;
    gap: 40px;
    width: fit-content;
    will-change: transform;
    padding-right: 200px;
  }

  .service-card {
    flex-shrink: 0;
    width: 400px;
    height: 500px;
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 24px;
    padding: 40px;
    display: flex;
    flex-direction: column;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }

  .service-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
  }

  .service-number {
    font-size: 14px;
    font-weight: 700;
    color: #6b7280;
    margin-bottom: 16px;
  }

  .service-title {
    font-size: 32px;
    font-weight: 800;
    color: #111827;
    margin-bottom: 16px;
  }

  .service-description {
    font-size: 16px;
    color: #6b7280;
    line-height: 1.6;
  }

  @media (max-width: 768px) {
    .services-scroll-content {
      display: none;
    }

    .services-content-inner {
      padding-top: 100px;
      padding-bottom: 80px;
    }

    .service-card {
      width: 100%;
      height: auto;
    }
  }
</style>
